# SmartVoice 技术栈选型

**版本:** 2.0
**日期:** 2026-01-22
**状态:** 已确认

---

## 📋 选型概述

基于 SmartVoice 产品需求、团队能力和预算约束,本文档对比评估各技术栈方案,并给出推荐选型。

**关键约束条件:**
- 团队规模:2人兼职,全栈能力
- 团队技术栈:React⭐⭐⭐⭐⭐、Node.js⭐⭐⭐⭐⭐
- 开发预算:¥1万(极低预算)
- 目标并发:500-1000用户
- 开发周期:3-6个月
- 核心需求:文本解析、TTS生成、音频处理、实时进度

---

## 🎨 前端技术栈

### 候选方案对比

| 方案 | 优点 | 缺点 | 学习成本 | 生态成熟度 | 团队熟悉度 | 推荐度 |
|------|------|------|---------|-----------|-----------|--------|
| **React 18** | 生态丰富、灵活、招聘容易、适合复杂交互 | 需选择配套工具、学习曲线陡 | 中等 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **Vue 3** | 易学、文档好、中文社区强、渐进式 | 大型项目支持一般、生态不如React | 低 | ⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ |
| **Next.js** | SSR/SSG、性能好、全栈、SEO友好 | 学习成本高、限制多、不需要SSR | 高 | ⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐ |

### 详细分析

#### React 18
**优势:**
- **团队熟悉度最高**(⭐⭐⭐⭐⭐) - 团队完全掌握,开发效率高
- **生态丰富** - UI组件库、状态管理、工具链选择多
- **适合复杂交互** - SmartVoice需要文件上传、音频播放器、实时进度、参数调整等复杂交互
- **灵活性强** - 可自由选择路由、状态管理、构建工具
- **招聘和资料** - 社区最大,问题解决快

**劣势:**
- 需要选择配套工具(路由、状态管理等),决策成本
- 初学者学习曲线陡(但团队已精通)

#### Vue 3
**优势:**
- 易学、渐进式、文档清晰
- 中文社区活跃

**劣势:**
- 团队熟悉度一般(⭐⭐⭐)
- 大型项目生态不如React
- 需要学习成本,不适合紧张的3个月MVP周期

#### Next.js
**优势:**
- SSR/SSG对SEO友好
- 全栈框架,路由、API内置

**劣势:**
- **不需要SSR** - SmartVoice是SaaS应用,需登录后使用,SEO不是核心需求
- 学习成本高,团队不熟悉
- 限制多,灵活性不如React

### 推荐方案

**选择:** **React 18**

**理由:**
1. **团队能力完美匹配** - 团队React熟练度⭐⭐⭐⭐⭐,无学习成本,开发效率最高
2. **适合产品需求** - SmartVoice有复杂交互(文件上传、音频播放器、实时进度、WebSocket),React生态和灵活性最适合
3. **快速迭代** - 3个月MVP周期紧张,选择熟悉技术栈风险最低
4. **生态丰富** - UI组件库、状态管理、构建工具选择多,可根据需求灵活组合

**配套工具:**

| 类型 | 选择 | 理由 |
|------|------|------|
| **构建工具** | Vite | 极快的开发体验,HMR秒级,适合快速迭代 |
| **状态管理** | Zustand | 轻量(约1KB),API简单,无需大量模板代码,适合中小型应用 |
| **UI组件库** | Ant Design 5 | 企业级组件丰富(Upload、Form、Table、Progress),开箱即用,设计规范成熟 |
| **路由** | React Router v6 | 标准路由方案,API简洁,TypeScript支持好 |
| **类型系统** | TypeScript 5 | 类型安全,降低bug率,团队熟悉 |
| **HTTP客户端** | Axios | 拦截器、错误处理、取消请求支持完善 |
| **实时通信** | Socket.io Client | 与后端Socket.io配合,用于实时进度推送 |
| **音频播放** | React-H5-Audio-Player | 开箱即用的音频播放器组件,支持进度控制、倍速播放 |
| **代码规范** | ESLint + Prettier | 保证代码质量和一致性 |

**技术栈组合:**
```
React 18 + TypeScript 5 + Vite + Zustand + Ant Design 5 + React Router v6
```

---

## ⚙️ 后端技术栈

### 候选方案对比

| 方案 | 优点 | 缺点 | 性能 | 生态 | 团队熟悉度 | 推荐度 |
|------|------|------|------|------|-----------|--------|
| **Node.js** | JS全栈、异步IO好、npm生态、快速开发 | 单线程、CPU密集不适合 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **Python** | 易学、AI生态强、快速开发、NLP友好 | 性能一般、并发弱 | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ |
| **Go** | 高性能、并发强、部署简单、资源占用低 | 学习成本高、开发速度慢 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐ | ⭐⭐ |

### 详细分析

#### Node.js 18
**优势:**
- **团队熟悉度最高**(⭐⭐⭐⭐⭐) - 团队完全掌握,与前端同语言,全栈效率高
- **异步IO优秀** - 非常适合SmartVoice的高并发TTS API调用、文件上传、WebSocket场景
- **npm生态丰富** - TTS SDK、OSS SDK、音频处理库、队列库等开箱即用
- **快速开发** - JS动态语言,开发速度快,适合3个月MVP
- **WebSocket支持好** - Socket.io成熟,实时进度推送实现简单

**劣势:**
- 单线程,不适合CPU密集任务(但ffmpeg音频处理可用子进程)
- 性能不如Go(但500-1000并发足够)

#### Python (FastAPI/Django)
**优势:**
- AI/NLP生态强(OpenAI SDK、Transformers等)
- 易学、快速开发

**劣势:**
- **团队不熟悉**(⭐⭐⭐) - 需要学习时间
- 并发性能弱,不如Node.js异步IO
- 与前端语言不统一,上下文切换成本高

#### Go
**优势:**
- 高性能、并发强
- 部署简单(单二进制)

**劣势:**
- **团队不熟悉**(⭐⭐) - 学习成本高,开发速度慢
- 生态不如Node.js,第三方SDK可能需要自己封装
- 不适合MVP快速迭代

### 推荐方案

**选择:** **Node.js 18 (LTS)**

**理由:**
1. **团队能力匹配** - 团队Node.js熟练度⭐⭐⭐⭐⭐,JS全栈无上下文切换,开发效率最高
2. **适合产品需求** - SmartVoice是IO密集型应用(高并发TTS API调用、OSS上传下载、WebSocket),Node.js异步IO是优势
3. **生态成熟** - 百度TTS SDK、阿里云OSS SDK、Bull队列、Socket.io等开箱即用
4. **快速迭代** - JS动态语言,开发速度快,适合3个月MVP周期
5. **性能足够** - 500-1000并发,Node.js完全可以支撑(单服务器可支持数千并发连接)

**框架选择: Express vs Nest.js**

| 框架 | 优点 | 缺点 | 推荐度 |
|------|------|------|--------|
| **Express** | 简单、灵活、生态最丰富、学习成本低 | 无规范、需自行组织代码结构 | ⭐⭐⭐⭐ |
| **Nest.js** | 规范、TypeScript原生、模块化、企业级 | 学习成本高、限制多、对MVP过重 | ⭐⭐⭐ |

**选择:** **Express**

**理由:**
- MVP阶段不需要过度设计,Express简单灵活,开发速度快
- 团队对Express更熟悉,可快速搭建
- 后续如需重构,可逐步迁移到Nest.js

**配套工具:**

| 类型 | 选择 | 理由 |
|------|------|------|
| **框架** | Express 4 | 简单灵活,生态丰富,适合MVP |
| **ORM** | Prisma | 类型安全,自动生成TypeScript类型,迁移方便 |
| **任务队列** | Bull + Redis | 成熟的异步任务队列,支持重试、优先级、并发控制 |
| **实时通信** | Socket.io | WebSocket封装,兼容性好,用于推送TTS生成进度 |
| **TTS服务** | Coqui TTS(自部署) | 开源TTS模型,GPU推理,边际成本¥0 |
| **NLP服务** | Deepseek API | 最便宜的大模型API(¥0.001/千token) |
| **音频处理** | fluent-ffmpeg | ffmpeg的Node.js封装,用于音频拼接 |
| **文件上传** | Multer | Express文件上传中间件,支持流式上传 |
| **对象存储** | MinIO(自部署) + OSS SDK | S3兼容,可配置切换到云OSS |
| **身份认证** | JWT + bcrypt | 无状态认证,适合RESTful API |
| **参数验证** | Joi | 强大的参数验证库,错误提示清晰 |
| **日志** | Winston | 分级日志,支持多种输出(文件、控制台) |
| **进程管理** | PM2 | Node.js进程守护,崩溃自动重启 |

**技术栈组合:**
```
Node.js 18 + TypeScript 5 + Express 4 + Prisma + Bull + Socket.io
Coqui TTS(自部署) + Deepseek API + MinIO(自部署)
```

---

## 💾 数据库与存储选择

### 主数据库候选方案对比

| 方案 | 适用场景 | 优点 | 缺点 | 推荐度 |
|------|---------|------|------|--------|
| **PostgreSQL** | 复杂查询、关系数据 | 功能强大、可靠、免费、JSON支持好 | 学习成本中等 | ⭐⭐⭐⭐⭐ |
| **MySQL** | 简单关系数据 | 简单、流行、资源多 | 功能相对弱、JSON支持一般 | ⭐⭐⭐⭐ |
| **MongoDB** | 非结构化数据 | 灵活、易扩展 | SmartVoice数据结构清晰,不需要灵活性 | ⭐⭐ |

### 辅助存储候选方案对比

| 方案 | 适用场景 | 优点 | 缺点 | 推荐度 |
|------|---------|------|------|--------|
| **Redis** | 缓存、会话、队列 | 极快、丰富数据结构 | 仅内存存储 | ⭐⭐⭐⭐⭐(辅助) |
| **MinIO** | 对象存储(自部署) | S3兼容、零边际成本、完全可控 | 单点故障风险、带宽受限 | ⭐⭐⭐⭐⭐(MVP) |
| **阿里云OSS** | 对象存储(云服务) | 高可靠、CDN加速、无运维 | 成本高(¥960/年) | ⭐⭐⭐⭐(备用) |

### 主数据库详细分析

#### PostgreSQL 14
**优势:**
- **功能强大** - 支持复杂查询、事务、外键、全文搜索、JSON字段
- **JSON支持好** - 音色配置(JSON格式)可存储为JSONB,支持索引和查询
- **可靠性高** - ACID事务,数据安全
- **完全免费** - 无任何限制,节省成本
- **团队熟悉度高**(⭐⭐⭐⭐) - 团队有PostgreSQL经验

**劣势:**
- 学习成本比MySQL略高(但团队已掌握)

**适用场景:**
- 用户表、项目表、章节表、角色表、音频表、任务表等核心业务数据
- 支持复杂查询(如"查询某用户所有项目的生成进度")
- 事务保证数据一致性

#### MySQL 8
**优势:**
- 简单、流行、资料多

**劣势:**
- JSON支持不如PostgreSQL
- 功能相对弱(如不支持递归查询)

#### MongoDB
**优势:**
- 灵活的Schema

**劣势:**
- **不适合SmartVoice** - 数据结构清晰(用户、项目、章节、角色),是典型的关系型数据
- 无事务支持(旧版),数据一致性风险
- 复杂查询不如PostgreSQL

### 辅助存储详细分析

#### MinIO(自部署对象存储)
**优势:**
- **零边际成本** - 自部署,无存储和流量费用
- **S3 API兼容** - 100%兼容S3 API,后续一行配置切换到云OSS
- **完全自主可控** - 无供应商锁定,数据完全掌控
- **Docker部署简单** - 单容器部署,资源占用低(约50MB内存)
- **内置管理界面** - Web控制台,方便管理

**劣势:**
- 单点故障风险(需配置备份到云OSS)
- 无CDN加速(需自行配置Nginx缓存)
- 带宽受限于ECS(3Mbps,升级成本高)
- 需要运维(监控磁盘空间、健康检查)

**适用场景:**
- MVP阶段:txt文件上传(≤10MB)、生成的MP3音频存储(≤500MB/项目)
- 存储量<500GB时成本最优

#### Redis 7
**优势:**
- 极快(内存存储)
- 丰富数据结构(String、List、Hash、Set)

**用途:**
- Session存储
- 音频片段缓存(相同文本+音色+参数)
- Bull任务队列
- API限流计数器

#### 阿里云OSS(备用对象存储)
**优势:**
- 高可靠性(99.995% SLA,多副本)
- CDN加速,用户下载速度快
- 零运维,按需付费
- 弹性扩展

**劣势:**
- 成本较高(约¥960/年固定成本)
- 供应商锁定(但S3兼容可切换)

**切换时机:**
- 存储量>500GB(MinIO单机磁盘不够)
- 日下载流量>1TB(带宽成本过高)
- 需要CDN加速(用户遍布全国)
- 用户规模>5000(需要高可用)

### 推荐方案

**主数据库:** **PostgreSQL 14**

**理由:**
1. **数据结构清晰** - SmartVoice是典型的关系型数据(用户-项目-章节-角色-音频),PostgreSQL完美匹配
2. **功能强大** - 支持复杂查询、事务、外键约束,保证数据一致性
3. **JSON支持好** - 音色配置(JSON)可存储为JSONB,支持索引和部分更新
4. **团队熟悉度高** - 团队有PostgreSQL经验,开发效率高
5. **完全免费** - 节省成本,无任何限制

**对象存储(主):** **MinIO(自部署)**

**理由:**
1. **成本最低** - ¥0边际成本,节省¥960/年(MVP阶段)
2. **S3兼容** - 使用S3 SDK,后续一行配置切换到云OSS
3. **满足MVP需求** - 50GB存储足够,下载速度可接受
4. **技术债务可控** - Docker部署简单,后续切换到云OSS成本低

**对象存储(备):** **阿里云OSS**

**切换时机:** 存储>500GB、流量>1TB、需要CDN、用户>5000

**缓存/队列:** **Redis 7**

**用途:**
- Session存储(JWT可选,如需服务端Session可用Redis)
- 音频片段缓存(Key: `audio:{text_hash}:{voice_id}:{params_hash}`, Value: MinIO URL)
- Bull任务队列(TTS生成任务)
- API限流(用户请求计数)

**理由:**
- 极快的读写速度,减少TTS重复调用
- 丰富的数据结构,适合队列和缓存场景

**数据库与存储方案总结:**
```
主库: PostgreSQL 14 (业务数据)
对象存储(主): MinIO (文件存储,自部署)
对象存储(备): 阿里云OSS (异地备份、CDN加速)
缓存/队列: Redis 7 (Session、缓存、队列)
```

---

## 🛠️ 开发工具链

### 版本控制
- **Git + GitHub**
- Git工作流:主分支(main) + 功能分支(feature/xxx)
- PR Code Review

### 包管理器
- **前端:** pnpm (比npm快,节省磁盘空间)
- **后端:** npm (Node.js默认)

### 代码质量

#### Linter
- **ESLint 8** - JS/TS代码检查
- 配置:Airbnb规则 + 自定义规则

#### Formatter
- **Prettier** - 代码格式化
- 配置:单引号、无分号、2空格缩进

#### Type Check
- **TypeScript 5** - 前后端全栈类型安全
- 配置:strict模式,最大化类型检查

### 测试框架

#### 单元测试
- **前端:** Vitest (Vite原生支持,速度快)
- **后端:** Jest (Node.js标准测试框架)

#### E2E测试
- **Playwright** (比Cypress更强大,支持多浏览器)
- MVP阶段暂不投入,Beta阶段补充

### CI/CD
- **GitHub Actions** (免费额度足够MVP使用)
- 自动化流程:
  - 代码推送 → 运行Lint和Test → 构建 → 部署

---

## 📊 技术栈全景图

```
┌─────────────────────────────────────────────┐
│              用户界面 (浏览器)               │
│    React 18 + TypeScript + Vite             │
│    Ant Design 5 + Zustand                   │
│    React Router v6 + Socket.io Client       │
└──────────────────┬──────────────────────────┘
                   │ HTTPS / WebSocket
┌──────────────────▼──────────────────────────┐
│               API 网关层                     │
│    Node.js 18 + Express 4                   │
│    JWT认证 + Rate Limit + 日志中间件        │
└──────────────────┬──────────────────────────┘
                   │
┌──────────────────▼──────────────────────────┐
│             业务逻辑层                       │
│  ┌─────────────┬──────────────┬──────────┐  │
│  │用户服务     │项目服务      │TTS服务   │  │
│  ├─────────────┼──────────────┼──────────┤  │
│  │文件服务     │解析服务      │角色服务  │  │
│  ├─────────────┼──────────────┼──────────┤  │
│  │音频服务     │任务服务      │通知服务  │  │
│  └─────────────┴──────────────┴──────────┘  │
└──────────────────┬──────────────────────────┘
                   │
┌──────────────────▼──────────────────────────┐
│         Service Adapter 层                   │
│  ┌─────────────┬──────────────┬──────────┐  │
│  │StorageAdapter│TTSAdapter   │NLPAdapter│  │
│  │(MinIO/OSS)  │(Coqui/百度) │(Deepseek)│  │
│  └─────────────┴──────────────┴──────────┘  │
└──────────────────┬──────────────────────────┘
                   │
┌──────────────────▼──────────────────────────┐
│            数据访问层                        │
│    Prisma ORM + Redis Client                │
│    MinIO SDK + Bull Queue                   │
└──────────────────┬──────────────────────────┘
                   │
┌──────────────────▼──────────────────────────┐
│            数据存储层                        │
│  ┌──────────┬─────────┬────────┬─────────┐  │
│  │PostgreSQL│ Redis   │ MinIO  │ Coqui   │  │
│  │(业务数据)│(缓存)   │(文件)  │(TTS)    │  │
│  └──────────┴─────────┴────────┴─────────┘  │
└──────────────────┬──────────────────────────┘
                   │
┌──────────────────▼──────────────────────────┐
│           第三方服务层(备用)                 │
│  ┌─────────────┬──────────────┬──────────┐  │
│  │百度TTS API  │Deepseek API  │阿里云OSS │  │
│  │(备用TTS)    │(角色识别)    │(备用存储)│  │
│  └─────────────┴──────────────┴──────────┘  │
└─────────────────────────────────────────────┘
```

---

## 🎯 决策理由总结

### 1. 团队匹配度 ⭐⭐⭐⭐⭐

**完美匹配团队能力:**
- 前端React⭐⭐⭐⭐⭐ + 后端Node.js⭐⭐⭐⭐⭐ = **JS全栈,无上下文切换**
- PostgreSQL⭐⭐⭐⭐ - 团队有实战经验
- TypeScript全栈 - 类型安全,降低bug率
- **零学习成本** - 所有选型都是团队熟悉的技术,可立即开始开发

### 2. 产品需求匹配 ⭐⭐⭐⭐⭐

**高度契合SmartVoice需求:**

| 产品需求 | 技术方案 | 匹配度 |
|---------|---------|--------|
| 文件上传(拖拽、进度) | React + Ant Design Upload | ⭐⭐⭐⭐⭐ |
| 复杂交互(音色配置、参数调整) | React + Zustand | ⭐⭐⭐⭐⭐ |
| 实时进度推送 | Socket.io (前后端) | ⭐⭐⭐⭐⭐ |
| 高并发TTS调用 | Coqui TTS(自部署) + Bull队列 | ⭐⭐⭐⭐⭐ |
| 音频拼接 | Node.js + fluent-ffmpeg | ⭐⭐⭐⭐ |
| 复杂查询(用户项目、生成进度) | PostgreSQL | ⭐⭐⭐⭐⭐ |
| 音频缓存(降低TTS成本) | Redis + MinIO | ⭐⭐⭐⭐⭐ |
| 角色识别(NLP) | Deepseek API | ⭐⭐⭐⭐⭐ |
| 文件存储(低成本) | MinIO(自部署) | ⭐⭐⭐⭐⭐ |

### 3. 开发效率 ⭐⭐⭐⭐⭐

**最大化开发速度:**
- **JS全栈** - 前后端同语言,代码复用(如类型定义、工具函数)
- **TypeScript** - 类型安全,减少调试时间,IDE智能提示
- **成熟组件库** - Ant Design开箱即用,无需自己造轮子
- **丰富SDK** - Deepseek SDK、MinIO SDK、Coqui TTS开箱即用
- **快速构建** - Vite秒级HMR,开发体验极佳
- **简单框架** - Express简单灵活,不需要学习复杂概念
- **自部署优势** - 完全可控,无API限流,调试方便

**预期开发效率:**
- MVP核心功能(P0):约400人时(2人 × 10周 × 20小时)
- 比学习新技术栈(如Go、Python)快30-50%

### 4. 长期维护性 ⭐⭐⭐⭐

**可持续发展:**
- **生态稳定** - React、Node.js、PostgreSQL都是成熟技术,长期维护有保障
- **社区活跃** - 问题解决快,第三方库丰富
- **可扩展性** - 模块化设计,后续可拆分为微服务(如TTS服务独立)
- **招聘友好** - React和Node.js开发者市场供应充足

**技术债务:**
- MVP阶段使用Express,代码结构可能不够规范
- 后续可逐步迁移到Nest.js(如团队扩大到5人+)
- 单体架构,后续可按需拆分微服务

### 5. 成本考虑 ⭐⭐⭐⭐⭐

**自部署优先,成本最优:**

#### 开发成本:¥0
- 所有技术栈开源免费(React、Node.js、PostgreSQL、MinIO、Coqui TTS)
- 团队已掌握,无学习成本

#### 固定成本:约¥2,240/年
- **服务器:阿里云ECS(GPU) ¥2,160/年**
  - 1核4G + Tesla T4 GPU(Coqui TTS推理)
  - PostgreSQL:自建(包含在ECS中)
  - Redis:自建(包含在ECS中)
  - MinIO:自建(包含在ECS中)
- **域名:¥80/年**

#### 变动成本(MVP 100项目):约¥284/年
- **Coqui TTS:¥0** (边际成本¥0)
- **Deepseek NLP:¥30/年** (¥0.3/项目 × 100)
- **MinIO存储:¥0** (自部署,无额外费用)
- **ECS带宽流量:¥240/年** (300GB × ¥0.8/GB)
- **OSS备份:¥14/年** (10GB异地备份)

**MVP年总成本:**
```
固定成本:¥2,240/年 (89%)
变动成本:¥284/年 (11%)
━━━━━━━━━━━━━━━━━━━━━
总计:¥2,524/年
```

**vs 旧方案(纯云服务)对比:**
| 方案 | 年成本 | 差异 |
|------|--------|------|
| 旧方案(百度TTS + OpenAI + OSS) | ¥7,720 | - |
| 新方案(Coqui + Deepseek + MinIO) | ¥2,524 | **节省¥5,196(67%)** |

**成本优化手段:**
- **自部署TTS** - Coqui TTS边际成本¥0,节省¥4,500/年
- **自部署存储** - MinIO零成本,节省¥960/年
- **最便宜NLP** - Deepseek API比OpenAI便宜70%
- **Redis缓存** - 重复音频不重复生成,节省30-50%
- **用户付费** - 将成本转嫁给用户(如¥10-50/项目生成)

**总预算评估:**
- 开发预算:¥0(兼职)
- 云服务:¥2,240/年
- 第三方服务:¥284/年(100项目)
- **总计:¥2,524/年 ✅ 符合¥1万预算**

---

## 🚨 风险评估

### 技术风险

| 风险 | 等级 | 应对方案 |
|------|------|---------|
| Coqui TTS音质不达标 | 中 | 预训练模型测试;自动切换百度TTS;用户可选音质档位 |
| GPU服务器成本超预算 | 中 | 按需实例;模型优化;队列限流;评估抢占式实例 |
| Node.js单线程性能瓶颈 | 低 | 500-1000并发足够;后续可Cluster模式或横向扩展 |
| PostgreSQL单点故障 | 中 | MVP阶段接受;Beta阶段配置主从复制 |
| Deepseek API限流或涨价 | 中 | 自动Fallback到Qwen;多厂商备选;监控成本 |
| MinIO单点故障 | 中 | 定期备份到OSS;数据库记录文件元数据;可恢复 |
| ffmpeg音频处理性能 | 低 | 异步处理、队列限流;性能足够 |

### 成本风险

| 风险 | 等级 | 应对方案 |
|------|------|---------|
| GPU成本失控 | 中 | 按需实例(仅高峰期);抢占式实例(便宜60%);监控利用率 |
| 带宽成本超预算 | 低 | MinIO内网访问;升级ECS带宽;后续切换OSS+CDN |
| 云服务成本超预算 | 低 | 严格监控、按需扩容、优化存储(定期清理) |

### 时间风险

| 风险 | 等级 | 应对方案 |
|------|------|---------|
| 3个月MVP周期紧张 | 中 | 选择熟悉技术栈、严格P0范围、AI辅助开发 |
| 兼职开发时间不稳定 | 中 | 预留20%缓冲时间、灵活调整优先级 |

---

## 🔗 相关文档

- [技术总体设计](overall-design.md)
- [第三方服务评估](third-party-services.md)
- [系统架构设计](system-architecture.md)

---

## 📝 更新历史

| 版本 | 日期 | 变更说明 | 作者 |
|------|------|----------|------|
| 1.0  | 2026-01-22 | 初始版本,完成前后端数据库选型(纯云服务方案) | SmartVoice 团队 |
| 2.0  | 2026-01-22 | 重大更新:自部署优先策略,添加MinIO/Coqui TTS/Deepseek,成本降至¥2,524/年(67%节省) | SmartVoice 团队 |

---

**架构决策:** 自部署优先(MinIO + Coqui TTS) + Adapter Pattern + 最便宜API(Deepseek),成本从¥7,720降至¥2,524/年 ✅

**下一步:** 技术栈已确认,参考"第三方服务评估"和"系统架构设计"了解服务切换策略和Adapter Pattern实现。
